<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>案例库 - 思源汇 | 思政案例分享平台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        /* 基础样式 */
        :root {
            --primary: #c7000b;
            --primary-dark: #9e0000;
            --primary-light: #ff5a5f;
            --secondary: #f5f5f5;
            --accent: #ffc107;
            --dark: #333;
            --light: #fff;
            --gray: #f0f0f0;
            --text: #444;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', 'Microsoft YaHei', sans-serif;
            color: var(--text);
            background-color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5 {
            font-family: 'Noto Serif SC', 'SimSun', serif;
            font-weight: 700;
            color: var(--dark);
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: var(--light);
            padding: 15px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo img {
            height: 50px;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo h1 {
            font-size: 1.8rem;
            color: var(--light);
            margin: 0;
            line-height: 1.2;
        }

        .logo p {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 5px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            color: var(--light);
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 500;
            position: relative;
            padding: 5px 0;
            transition: var(--transition);
        }

        nav a:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: var(--transition);
        }

        nav a:hover:after {
            width: 100%;
        }

        nav a.active {
            color: var(--accent);
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--accent);
            color: var(--dark);
        }

        .btn-primary:hover {
            background: #ffb300;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
        }

        .btn-outline:hover {
            background: var(--accent);
            color: var(--dark);
        }

        .btn-small {
            padding: 5px 10px;
            font-size: 0.85rem;
        }

        .btn-icon {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            background: var(--primary-dark);
            transform: translateY(-5px);
        }
        
        .back-to-top i {
            font-size: 1.5rem;
        }

        /* 案例库页面 */
        .page-banner {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: white;
            padding: 80px 0;
            text-align: center;
            position: relative;
            margin-bottom: 60px;
        }

        .page-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?q=80&w=1470') center/cover;
            opacity: 0.2;
        }

        .page-banner h1 {
            font-size: 2.8rem;
            color: white;
            margin-bottom: 20px;
            position: relative;
        }

        .page-banner p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            opacity: 0.9;
            position: relative;
        }

        /* 筛选区域 */
        .filters {
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 40px;
        }

        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .filter-select, .filter-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .filter-select:focus, .filter-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(199, 0, 11, 0.2);
        }

        .filter-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 15px;
        }

        /* 标签选择器 */
        .tags-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 8px;
        }

        .tag-option {
            background: var(--secondary);
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid #ddd;
        }

        .tag-option.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* 案例列表 */
        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .case-card {
            background: var(--light);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
            z-index: 1;
            transform-origin: center;
        }

        .case-card:hover {
            transform: scale(2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .case-header {
            padding: 20px;
            background: var(--primary);
            color: var(--light);
            flex-shrink: 0;
        }

        /* 卡片标题样式 - 允许多行显示 */
        .case-header h3 {
            color: var(--light);
            font-size: 1.4rem; /* 稍小字体 */
            line-height: 1.4; /* 增加行高 */
            margin-bottom: 10px;
            min-height: 4em; /* 确保足够空间显示2行 */
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3; /* 最多显示3行 */
            -webkit-box-orient: vertical;
            word-break: break-word;
        }

        .case-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .case-body {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .case-body p {
            margin-bottom: 20px;
            flex-grow: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
        }

        .case-footer {
            padding: 15px 20px;
            background: var(--secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            min-height: 60px; /* 确保底部有足够高度 */
        }

        .tags {
            display: flex;
            gap: 8px;
            flex-wrap: nowrap; /* 禁止换行 */
            overflow-x: auto; /* 允许横向滚动 */
            max-width: 70%; /* 限制标签区域宽度 */
            padding-bottom: 2px; /* 给滚动条留空间 */
        }

        .tag {
            background: var(--primary-light);
            color: var(--light);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            flex-shrink: 0; /* 禁止标签缩小 */
            white-space: nowrap; /* 禁止标签内换行 */
        }

        .card-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
            z-index: 5;
        }

        .card-action {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: var(--transition);
        }

        .card-action:hover {
            transform: scale(1.1);
        }

        .card-action.favorite i {
            color: #ff4757;
        }

        /* 分页 */
        .pagination {
            display: flex;
            justify-content: center;
            margin: 40px 0;
        }

        .pagination ul {
            display: flex;
            list-style: none;
            gap: 8px;
        }

        .pagination li a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 5px;
            background: white;
            color: var(--dark);
            text-decoration: none;
            font-weight: 500;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .pagination li a:hover, .pagination li a.active {
            background: var(--primary);
            color: white;
        }

        /* 案例详情弹窗 */
        .case-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            padding: 20px;
        }

        .case-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .case-modal-content {
            background: white;
            border-radius: 10px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(50px);
            transition: transform 0.4s ease;
        }

        .case-modal.active .case-modal-content {
            transform: translateY(0);
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: var(--transition);
        }

        .modal-close:hover {
            transform: rotate(90deg);
            background: var(--primary-dark);
        }

        .case-modal-header {
            background: var(--primary);
            color: white;
            padding: 30px;
            position: relative;
        }

        /* 详情页标题样式 - 强制单行显示 */
        .case-modal-header h2 {
            color: white;
            font-size: 2rem;
            margin-bottom: 15px;
            white-space: nowrap; /* 强制不换行 */
            overflow: hidden;
            text-overflow: ellipsis; /* 溢出时显示省略号 */
            max-width: 100%; /* 确保标题不会超出容器 */
        }

        .case-modal-meta {
            display: flex;
            gap: 20px;
            font-size: 1rem;
            opacity: 0.9;
        }

        .case-modal-body {
            padding: 30px;
        }

        .case-modal-body h3 {
            color: var(--primary);
            margin: 25px 0 15px;
            font-size: 1.6rem;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
        }

        .case-modal-body p {
            margin-bottom: 20px;
            line-height: 1.8;
        }

        .case-modal-images {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .case-modal-image {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .case-modal-image img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }

        .case-modal-image:hover img {
            transform: scale(1.05);
        }

        .case-modal-footer {
            padding: 20px 30px;
            background: var(--secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 搜索历史 */
        .search-history {
            display: none;
            background: white;
            border-radius: 5px;
            box-shadow: var(--shadow);
            position: absolute;
            width: calc(100% - 30px);
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            margin-top: 5px;
        }

        .search-history.show {
            display: block;
        }

        .search-history-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid #eee;
        }

        .search-history-item:hover {
            background: var(--secondary);
        }

        /* 收藏提示 */
        .favorite-toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .favorite-toast.show {
            opacity: 1;
            visibility: visible;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: var(--light);
            padding: 60px 0 30px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .footer-col h3 {
            color: var(--light);
            font-size: 1.3rem;
            margin-bottom: 25px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-col h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--primary);
        }

        .footer-col p {
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--light);
            text-decoration: none;
            opacity: 0.8;
            transition: var(--transition);
        }

        .footer-links a:hover {
            opacity: 1;
            padding-left: 5px;
            color: var(--accent);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* 响应式设计 */
        @media (max-width: 992px) {
            nav ul {
                gap: 15px;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 20px;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            .filter-row {
                flex-direction: column;
            }
            
            .cases-grid {
                grid-template-columns: 1fr;
            }
            
            .case-footer {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .tags {
                max-width: 100%;
                width: 100%;
            }
            
            /* 移动端调整标题大小 */
            .case-header h3 {
                font-size: 1.3rem;
            }
            
            /* 移动端禁用放大效果 */
            .case-card:hover {
                transform: scale(1.05);
                z-index: 10;
            }
        }

        @media (max-width: 480px) {
            .page-banner h1 {
                font-size: 2.2rem;
            }
            
            .filter-actions {
                flex-direction: column;
            }
            
            .case-modal-header {
                padding: 20px 15px;
            }
            
            .case-modal-body {
                padding: 20px 15px;
            }

            .case-modal-meta {
                flex-direction: column;
                gap: 8px;
            }

            .pagination li a {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            /* 移动端详情页标题调整 */
            .case-modal-header h2 {
                font-size: 2.8rem;
            }
        }
        
        /* 筛选状态提示 */
        .filter-status {
            background: #f0f8ff;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 5px 5px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .filter-status i {
            color: var(--primary);
        }
        
        /* 空状态提示 */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            background: var(--secondary);
            border-radius: 10px;
        }
        
        .empty-state i {
            font-size: 4rem;
            color: #ccc;
            margin-bottom: 20px;
        }
        
        /* 加载动画 */
        .loader {
            display: none;
            text-align: center;
            padding: 20px;
            grid-column: 1 / -1;
        }
        
        .loader .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(199, 0, 11, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 滚动条样式 */
        .tags::-webkit-scrollbar {
            height: 4px;
        }
        
        .tags::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 2px;
        }
        
        .tags::-webkit-scrollbar-thumb {
            background: #c0c0c0;
            border-radius: 2px;
        }
        
        .tags::-webkit-scrollbar-thumb:hover {
            background: #a0a0a0;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-book-open fa-2x"></i>
                </div>
                <div class="logo-text">
                    <h1>思源汇</h1>
                    <p>思政案例分享平台 · 弘扬社会主义核心价值观</p>
                </div>
            </div>

            <nav>
                <ul>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="anli.html" class="active">案例库</a></li>
                    <li><a href="xinde.html">心得体会</a></li>
                    <li><a href="huodong.html">活动报道</a></li>
                    <li><a href="shiping.html">视频访谈</a></li>
                </ul>
            </nav>

        </div>
    </header>

    <!-- 案例库页面内容 -->
    <section class="page-banner">
        <div class="container">
            <h1>思政案例库</h1>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;收录全国优秀思政教育案例，涵盖高校、中小学、企事业单位等各个领域，
			为思政教育工作者提供丰富的教学资源和实践参考</p>
        </div>
    </section>

    <main class="container">
        <!-- 筛选区域 -->
        <section class="filters">
            <div class="filter-row">
                <div class="filter-group">
                    <label for="category">案例分类</label>
                    <select class="filter-select" id="category">
                        <option value="">全部分类</option>
                        <option value="college">高校思政</option>
                        <option value="school">中小学德育</option>
                        <option value="enterprise">企业党建</option>
                        <option value="community">社区教育</option>
                        <option value="rural">乡村振兴</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="region">地区分布</label>
                    <select class="filter-select" id="region">
                        <option value="">全部地区</option>
                        <option value="north">华北地区</option>
                        <option value="east">华东地区</option>
                        <option value="south">华南地区</option>
                        <option value="west">西部地区</option>
                        <option value="central">中部地区</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="date">发布时间</label>
                    <select class="filter-select" id="date">
                        <option value="">全部时间</option>
                        <option value="week">最近一周</option>
                        <option value="month">最近一月</option>
                        <option value="quarter">最近三月</option>
                        <option value="year">最近一年</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-row">
                <div class="filter-group">
                    <label for="keyword">关键词搜索</label>
                    <div style="position: relative;">
                        <input type="text" class="filter-input" id="keyword" placeholder="输入案例标题、作者或关键词">
                        <div class="search-history" id="searchHistory"></div>
                    </div>
                </div>
            </div>
            
            <div class="filter-actions">
                <button id="resetFilters" class="btn btn-outline">重置筛选</button>
                <button id="applyFilters" class="btn btn-primary">筛选案例</button>
            </div>
        </section>

        <!-- 筛选状态 -->
        <div class="filter-status" id="filterStatus" style="display: none;">
            <i class="fas fa-filter"></i>
            <span>当前筛选：<span id="activeFilters">无筛选条件</span></span>
            <button id="clearFilters" class="btn btn-small" style="margin-left: 10px;">清除</button>
        </div>

        <!-- 案例列表 -->
        <section class="cases-container">
            <div class="cases-grid" id="casesGrid">
                <!-- 案例卡片将通过JS动态生成 -->
            </div>
            
            <!-- 加载动画 -->
            <div class="loader" id="loader">
                <div class="spinner"></div>
                <p>正在加载案例数据...</p>
            </div>
            
            <!-- 空状态 -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <i class="fas fa-inbox"></i>
                <h3>没有找到符合条件的案例</h3>
                <p>请尝试调整筛选条件或清除筛选</p>
                <button id="clearFiltersBtn" class="btn btn-primary" style="margin-top: 15px;">清除筛选</button>
            </div>
        </section>

        <!-- 分页控件 -->
        <div class="pagination" id="pagination">
            <ul>
                <!-- 分页将由JS动态生成 -->
            </ul>
        </div>
    </main>

    <!-- 案例详情弹窗 -->
    <div class="case-modal" id="caseModal">
        <div class="case-modal-content">
            <div class="modal-close">
                <i class="fas fa-times"></i>
            </div>
            <div class="case-modal-header">
                <h2 id="modalTitle">红色基因代代传:高校党史教育创新实践</h2>
                <div class="case-modal-meta">
                    <span><i class="fas fa-user"></i> <span id="modalAuthor">张教授</span></span>
                    <span><i class="fas fa-calendar"></i> <span id="modalDate">2023-05-12</span></span>
                    <span><i class="fas fa-eye"></i> <span id="modalViews">1,245</span>次浏览</span>
                </div>
            </div>
            <div class="case-modal-body">
                <div id="modalContent">
                    <!-- 详情内容将由JS动态生成 -->
                </div>
            </div>
            <div class="case-modal-footer">
                <div class="tags" id="modalTags">
                    <!-- 标签将由JS动态生成 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 收藏提示 -->
    <div class="favorite-toast" id="favoriteToast">
        <i class="fas fa-heart"></i>
        <span id="toastMessage">已添加到收藏</span>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <h3>思政案例分享平台</h3>
                    <p>致力于打造全国最专业的思政教育资源分享平台，为思政教育工作者提供丰富的教学资源和实践参考。</p>
                </div>
            </div>
    
            <div class="copyright">
                <p>&copy; 2025 思政案例分享平台 版权所有 | 赵利宏20235104163</p>
            </div>
        </div>
    </footer>

    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <script>
        // 案例数据
        const caseData = [
            {
                id: 1,
                title: "红色基因代代传<br>高校党史教育创新实践",
                author: "张教授",
                date: "2023-05-12",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本项目创新性地将地方红色资源融入高校党史教育，通过\"行走的课堂\"形式，组织学生实地探访革命遗址，开展沉浸式学习，结合多媒体技术和互动体验，使党史教育更加生动形象，增强学生的参与感和认同感。",
                tags: ["党史教育", "高校思政"],
                category: "college",
                region: "east",
                views: 1245,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在新时代背景下，高校党史教育面临着如何提升吸引力和实效性的挑战。传统的课堂讲授模式难以满足当代大学生的学习需求，亟需探索创新教育形式。本项目依托本地丰富的红色资源，将党史教育从课堂延伸到革命遗址、纪念馆等场所，打造\"行走的党史课堂\"。",
                    process: "1. <strong>课程设计：</strong>结合本地红色资源特点，设计\"革命历程\"、\"英雄人物\"、\"精神传承\"三大主题模块，每个模块包含理论学习、实地探访、研讨交流三个环节。<br>2. <strong>实地教学：</strong>组织学生前往革命遗址、纪念馆、烈士陵园等场所，通过现场讲解、情景再现、互动体验等形式开展教学。<br>3. <strong>沉浸体验：</strong>在重要历史事件发生地，组织学生开展角色扮演、情景再现等活动，增强学习代入感。<br>4. <strong>成果转化：</strong>引导学生将学习感悟转化为微视频、情景剧、研究报告等成果，深化学习效果。",
                    innovation: "1. <strong>空间转换：</strong>打破传统课堂局限，将教学场所延伸到历史现场，增强学习体验感。<br>2. <strong>多感官参与：</strong>通过视觉、听觉、触觉等多感官参与，提升学习记忆度和情感共鸣。<br>3. <strong>知行合一：</strong>将理论学习与实践体验相结合，促进知识内化与价值认同。<br>4. <strong>数字赋能：</strong>开发\"红色地图\"小程序，实现线上线下融合学习。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目实施一年来，参与学生超过2000人次，形成优秀实践成果120余项。学生满意度达95.8%，党史知识掌握度提升42.3%。项目获评省级思政工作精品项目，相关经验在10余所高校推广。"
                }
            },
            {
                id: 2,
                title: "社区志愿服务<br>大学生社会实践新模式",
                author: "李老师",
                date: "2023-04-28",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;探索\"专业+服务\"的大学生社会实践模式，组织不同专业学生深入社区，开展专业特色志愿服务，将专业知识与社会需求紧密结合，建立长效机制，实现学生成长与服务社会的双赢。",
                tags: ["社会实践", "志愿服务"],
                category: "community",
                region: "south",
                views: 987,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在大学生社会实践中，如何将专业知识与社会服务有机结合，是提升实践效果的关键。本项目探索\"专业+服务\"模式，组织不同专业学生深入社区，开展具有专业特色的志愿服务。",
                    process: "1. <strong>需求调研：</strong>通过社区走访、问卷调研等方式，了解社区居民的实际需求。<br>2. <strong>项目设计：</strong>根据社区需求和学校专业特点，设计多元化志愿服务项目。<br>3. <strong>团队组建：</strong>跨专业组建服务团队，如法律咨询、健康服务、教育辅导等。<br>4. <strong>服务实施：</strong>定期组织学生进入社区开展志愿服务活动。",
                    innovation: "1. <strong>专业融合：</strong>将专业知识与社会服务有机结合。<br>2. <strong>长效机制：</strong>建立常态化志愿服务机制。<br>3. <strong>社区联动：</strong>与社区建立长期合作关系。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目实施一年来，组建了12支专业志愿服务队，服务覆盖5个社区，受益居民超过3000人次。学生参与度提升45%，获得社区高度评价。"
                }
            },
            {
                id: 3,
                title: "工匠精神培育<br>职业院校思政教育创新",
                author: "王校长",
                date: "2023-04-15",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;将工匠精神培育融入职业院校思政教育体系，通过\"大国工匠进校园\"、\"技能大师工作室\"等形式，培养学生精益求精的职业态度，传承工匠精神，提升职业素养，促进学生全面发展。",
                tags: ["工匠精神", "职业教育"],
                category: "college",
                region: "central",
                views: 1456,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在职业教育中，如何培养学生的职业素养和工匠精神是思政教育的重要内容。本项目将工匠精神培育融入职业院校思政教育体系。",
                    process: "1. <strong>课程融入：</strong>将工匠精神融入思政课程和专业课程。<br>2. <strong>大师引领：</strong>邀请大国工匠、技能大师进校园开展讲座和工作坊。<br>3. <strong>实践培养：</strong>建立技能大师工作室，开展师徒制培养模式。<br>4. <strong>文化熏陶：</strong>建设工匠文化长廊，营造崇尚工匠精神的校园文化。",
                    innovation: "1. <strong>双师协同：</strong>思政教师与专业教师协同育人。<br>2. <strong>知行合一：</strong>理论教学与实践训练相结合。<br>3. <strong>文化浸润：</strong>营造崇尚工匠精神的校园文化氛围。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目开展以来，学生职业素养明显提升，就业质量显著提高。毕业生受到用人单位广泛好评，项目获评全国职业教育优秀案例。"
                }
            },
            {
                id: 4,
                title: "乡村振兴视角下的<br>思政教育实践探索",
                author: "陈主任",
                date: "2023-03-22",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;组织大学生深入农村基层，开展乡村振兴主题思政教育实践活动，通过调研、服务、实践等多种形式，增强学生的社会责任感和使命感，培养服务乡村建设的意识与能力。",
                tags: ["乡村振兴", "社会实践"],
                category: "rural",
                region: "west",
                views: 876,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在乡村振兴战略背景下，如何引导大学生认识乡村、服务乡村，是高校思政教育的重要课题。本项目组织学生深入农村基层开展实践活动。",
                    process: "1. <strong>理论学习：</strong>开展乡村振兴政策理论学习。<br>2. <strong>乡村调研：</strong>组织学生深入农村开展社会调研。<br>3. <strong>实践服务：</strong>开展支教支农、科技服务、文化下乡等活动。<br>4. <strong>成果转化：</strong>形成调研报告和实践成果。",
                    innovation: "1. <strong>双课堂联动：</strong>第一课堂与第二课堂有机结合。<br>2. <strong>多元主体参与：</strong>高校、地方政府、乡村社区多方协同。<br>3. <strong>长效育人机制：</strong>建立常态化乡村振兴实践基地。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目开展三年来，累计组织500余名学生参与，服务覆盖20余个乡村，形成优秀调研报告80余篇，多个实践成果被地方政府采纳应用。"
                }
            },
            {
                id: 5,
                title: "传统文化融入<br>中小学德育的创新实践",
                author: "赵老师",
                date: "2023-02-18",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过传统节日活动、非遗文化体验、经典诵读等形式，将中华优秀传统文化融入中小学德育课程体系，增强学生的文化自信，培养家国情怀，形成具有特色的德育模式。",
                tags: ["文化自信", "非遗传承"],
                category: "school",
                region: "north",
                views: 1123,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在中小学德育中，如何有效融入中华优秀传统文化，是增强学生文化自信的重要途径。本项目探索传统文化融入德育的创新模式。",
                    process: "1. <strong>课程建设：</strong>开发传统文化系列校本课程。<br>2. <strong>活动育人：</strong>开展传统节日、非遗体验等主题活动。<br>3. <strong>环境熏陶：</strong>建设传统文化主题校园环境。<br>4. <strong>家校协同：</strong>邀请家长参与传统文化教育活动。",
                    innovation: "1. <strong>课程活动一体化：</strong>课程教学与主题活动相互支撑。<br>2. <strong>体验式学习：</strong>通过亲身体验感受传统文化魅力。<br>3. <strong>文化环境育人：</strong>营造浓厚的传统文化校园氛围。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目实施后，学生对传统文化的认知度和认同感显著提升，学校德育工作特色鲜明，被评为传统文化教育示范校。"
                }
            },
            {
                id: 6,
                title: "企业党建与思政教育<br>融合创新实践",
                author: "周书记",
                date: "2023-01-05",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;探索企业党建与思政教育融合的创新模式，通过\"党员先锋岗\"、\"红色车间\"等形式，将思想政治教育融入企业文化建设，提升员工思想素质，增强企业凝聚力与竞争力。",
                tags: [ "企业文化", "员工素质"],
                category: "enterprise",
                region: "east",
                views: 765,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在企业文化建设中，如何将党建工作与思想政治教育有机结合，是新时代企业发展的内在要求。本项目探索企业党建与思政教育融合的创新模式。",
                    process: "1. <strong>阵地建设：</strong>打造党建文化长廊、红色车间等教育阵地。<br>2. <strong>活动载体：</strong>开展\"党员先锋岗\"、\"红色故事会\"等特色活动。<br>3. <strong>机制创新：</strong>建立党员联系群众、思想动态分析等机制。<br>4. <strong>文化融合：</strong>将红色文化融入企业文化建设。",
                    innovation: "1. <strong>双融双促：</strong>党建工作与思政教育深度融合。<br>2. <strong>阵地创新：</strong>打造特色教育阵地。<br>3. <strong>活动育人：</strong>开展形式多样的教育活动。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目实施后，企业凝聚力显著增强，员工精神面貌焕然一新，企业党建经验在行业内推广，被评为党建工作示范单位。"
                }
            },
            {
                id: 7,
                title: "高校思政课<br>实践教学创新模式研究",
                author: "孙教授",
                date: "2023-06-10",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;探索高校思政课实践教学的创新模式，通过\"理论+实践\"、\"线上+线下\"相结合的方式，提升思政课的吸引力和实效性，构建多元化、立体化的实践教学体系。",
                tags: ["教学创新", "线上线下"],
                category: "college",
                region: "central",
                views: 932,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在高校思政课改革中，如何增强实践教学的实效性，是提升思政课教学质量的关键。本项目探索思政课实践教学的创新模式。",
                    process: "1. <strong>教学设计：</strong>构建\"理论+实践\"的教学体系。<br>2. <strong>平台建设：</strong>建设线上线下相结合的实践平台。<br>3. <strong>资源整合：</strong>整合校内外实践教学资源。<br>4. <strong>评价改革：</strong>建立多元化的实践教学评价体系。",
                    innovation: "1. <strong>双线融合：</strong>线上理论学习与线下实践体验相结合。<br>2. <strong>多元协同：</strong>学校、社会、企业多方协同育人。<br>3. <strong>评价创新：</strong>过程性评价与结果性评价相结合。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目实施后，思政课学生满意度提升至96%，实践教学成果丰硕，相关经验在省内外高校推广。"
                }
            },
            {
                id: 8,
                title: "中小学思政课<br>一体化建设实践探索",
                author: "钱老师",
                date: "2023-05-30",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;探索中小学思政课一体化建设路径，通过学段衔接、内容整合、资源共享等方式，构建纵向贯通、横向联动的思政教育体系，提升思政教育的系统性和有效性。",
                tags: ["一体化建设", "基础教育"],
                category: "school",
                region: "south",
                views: 845,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在中小学思政课建设中，如何实现学段衔接、内容整合，是构建一体化思政教育体系的关键。本项目探索中小学思政课一体化建设路径。",
                    process: "1. <strong>顶层设计：</strong>制定一体化建设实施方案。<br>2. <strong>内容整合：</strong>构建学段衔接的课程内容体系。<br>3. <strong>资源共享：</strong>建立区域思政教育资源共享平台。<br>4. <strong>教师协同：</strong>组建跨学段思政课教师教研团队。",
                    innovation: "1. <strong>学段衔接：</strong>实现小学、初中、高中思政课有效衔接。<br>2. <strong>资源共享：</strong>建设区域性思政教育资源库。<br>3. <strong>教师协同：</strong>建立跨学段教师教研机制。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目实施后，区域内思政课教学质量显著提升，形成了一批优秀教学成果，项目经验在全省推广。"
                }
            },
            {
                id: 9,
                title: "新时代国企<br>青年思政教育创新实践",
                author: "吴部长",
                date: "2023-04-05",
                content: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;探索新时代国企青年思政教育创新路径，通过\"青年讲堂\"、\"榜样力量\"、\"实践锻炼\"等形式，提升青年员工思想政治素养，培养担当民族复兴大任的时代新人。",
                tags: ["青年教育", "思政工作"],
                category: "enterprise",
                region: "north",
                views: 723,
                isFavorite: false,
                details: {
                    background: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在国企改革发展中，如何加强青年员工思想政治教育，是培养担当民族复兴大任时代新人的重要课题。本项目探索国企青年思政教育创新路径。",
                    process: "1. <strong>思想引领：</strong>开展理论学习和形势政策教育。<br>2. <strong>榜样示范：</strong>选树青年榜样，发挥示范引领作用。<br>3. <strong>实践锻炼：</strong>组织青年参与重点项目和基层锻炼。<br>4. <strong>文化熏陶：</strong>建设富有时代气息的企业文化。",
                    innovation: "1. <strong>形式创新：</strong>采用青年喜闻乐见的教育形式。<br>2. <strong>榜样引领：</strong>发挥先进典型的示范作用。<br>3. <strong>实践育人：</strong>在实践中培养青年责任担当。",
                    effect: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;项目实施后，青年员工思想政治素养显著提升，企业凝聚力增强，青年创新活力迸发，为企业发展注入新动能。"
                }
            }
        ];

        // 每页显示的案例数量
        const casesPerPage = 6;
        // 当前页码
        let currentPage = 1;
        // 总页数
        let totalPages = 0;
        // 筛选后的案例数据
        let filteredCases = [];
        // 当前选中的标签
        let selectedTags = [];
        // 搜索历史
        let searchHistory = [];
        
        // DOM 元素
        const casesGrid = document.getElementById('casesGrid');
        const pagination = document.querySelector('#pagination ul');
        const filterStatus = document.getElementById('filterStatus');
        const activeFilters = document.getElementById('activeFilters');
        const emptyState = document.getElementById('emptyState');
        const loader = document.getElementById('loader');
        const clearFiltersBtn = document.getElementById('clearFiltersBtn');
        const searchHistoryContainer = document.getElementById('searchHistory');
        const keywordInput = document.getElementById('keyword');
        const tagsSelector = document.getElementById('tagsSelector');
        const favoriteToast = document.getElementById('favoriteToast');
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 加载收藏状态
            loadFavorites();
            
            // 加载搜索历史
            loadSearchHistory();
            
            // 初始化案例列表
            filteredCases = [...caseData];
            renderCases();
            
            // 绑定筛选按钮事件
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            document.getElementById('clearFilters').addEventListener('click', resetFilters);
            clearFiltersBtn.addEventListener('click', resetFilters);
            
            // 绑定分页事件
            pagination.addEventListener('click', handlePaginationClick);
            
            // 初始化回到顶部按钮
            initBackToTop();
            
            // 初始化案例弹窗
            initCaseModal();
            
            // 初始化标签选择器
            initTagsSelector();
            
            // 搜索框事件
            keywordInput.addEventListener('focus', showSearchHistory);
            keywordInput.addEventListener('input', handleSearchInput);
            document.addEventListener('click', hideSearchHistory);
            
            // 绑定收藏事件
            casesGrid.addEventListener('click', handleFavoriteClick);
        });
        
        // 初始化标签选择器
        function initTagsSelector() {
            tagsSelector.addEventListener('click', function(e) {
                if (e.target.classList.contains('tag-option')) {
                    const tag = e.target.getAttribute('data-tag');
                    
                    if (tag === 'all') {
                        // 清除所有标签选择
                        selectedTags = [];
                        document.querySelectorAll('.tag-option').forEach(option => {
                            option.classList.remove('selected');
                        });
                        e.target.classList.add('selected');
                    } else {
                        const allOption = document.querySelector('.tag-option[data-tag="all"]');
                        allOption.classList.remove('selected');
                        
                        if (e.target.classList.contains('selected')) {
                            e.target.classList.remove('selected');
                            selectedTags = selectedTags.filter(t => t !== tag);
                        } else {
                            e.target.classList.add('selected');
                            selectedTags.push(tag);
                        }
                        
                        // 如果没有选中任何标签，则选中"全部标签"
                        if (selectedTags.length === 0) {
                            allOption.classList.add('selected');
                        }
                    }
                }
            });
        }
        
        // 加载收藏状态
        function loadFavorites() {
            const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            caseData.forEach(caseItem => {
                if (favorites.includes(caseItem.id)) {
                    caseItem.isFavorite = true;
                }
            });
        }
        
        // 保存收藏状态
        function saveFavorites() {
            const favorites = caseData
                .filter(caseItem => caseItem.isFavorite)
                .map(caseItem => caseItem.id);
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }
        
        // 处理收藏点击事件
        function handleFavoriteClick(e) {
            if (e.target.closest('.favorite')) {
                const card = e.target.closest('.case-card');
                const caseId = parseInt(card.querySelector('.view-detail').getAttribute('data-id'));
                const caseItem = caseData.find(item => item.id === caseId);
                
                if (caseItem) {
                    caseItem.isFavorite = !caseItem.isFavorite;
                    
                    // 更新UI
                    const favoriteIcon = card.querySelector('.favorite i');
                    if (caseItem.isFavorite) {
                        favoriteIcon.classList.add('fas');
                        favoriteIcon.classList.remove('far');
                        showFavoriteToast('已添加到收藏');
                    } else {
                        favoriteIcon.classList.add('far');
                        favoriteIcon.classList.remove('fas');
                        showFavoriteToast('已从收藏中移除');
                    }
                    
                    // 保存到本地存储
                    saveFavorites();
                }
            }
        }
        
        // 显示收藏提示
        function showFavoriteToast(message) {
            document.getElementById('toastMessage').textContent = message;
            favoriteToast.classList.add('show');
            
            setTimeout(() => {
                favoriteToast.classList.remove('show');
            }, 2000);
        }
        
        // 加载搜索历史
        function loadSearchHistory() {
            searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];
            updateSearchHistoryDisplay();
        }
        
        // 保存搜索历史
        function saveSearchHistory() {
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
        }
        
        // 更新搜索历史显示
        function updateSearchHistoryDisplay() {
            searchHistoryContainer.innerHTML = '';
            
            // 只显示最近的5条记录
            const recentHistory = [...new Set(searchHistory)].slice(0, 5);
            
            recentHistory.forEach(term => {
                const item = document.createElement('div');
                item.className = 'search-history-item';
                item.textContent = term;
                item.addEventListener('click', () => {
                    keywordInput.value = term;
                    applyFilters();
                    hideSearchHistory();
                });
                searchHistoryContainer.appendChild(item);
            });
        }
        
        // 显示搜索历史
        function showSearchHistory() {
            if (searchHistory.length > 0) {
                searchHistoryContainer.classList.add('show');
            }
        }
        
        // 隐藏搜索历史
        function hideSearchHistory(e) {
            if (!e || !keywordInput.contains(e.target)) {
                searchHistoryContainer.classList.remove('show');
            }
        }
        
        // 处理搜索输入
        function handleSearchInput() {
            if (keywordInput.value.trim() !== '') {
                showSearchHistory();
            } else {
                hideSearchHistory();
            }
        }
        
        // 渲染案例列表
        function renderCases() {
            // 计算总页数
            totalPages = Math.ceil(filteredCases.length / casesPerPage);
            
            // 清空案例列表
            casesGrid.innerHTML = '';
            
            // 显示加载状态
            loader.style.display = 'block';
            
            // 模拟加载延迟
            setTimeout(() => {
                loader.style.display = 'none';
                
                // 检查是否有案例
                if (filteredCases.length === 0) {
                    emptyState.style.display = 'block';
                    pagination.innerHTML = '';
                    return;
                } else {
                    emptyState.style.display = 'none';
                }
                
                // 计算当前页案例
                const startIndex = (currentPage - 1) * casesPerPage;
                const endIndex = startIndex + casesPerPage;
                const currentCases = filteredCases.slice(startIndex, endIndex);
                
                // 生成案例卡片
                currentCases.forEach(caseItem => {
                    const caseCard = document.createElement('div');
                    caseCard.className = 'case-card';
                    
                    // 只显示前3个标签，多余部分用"..."表示
                    const displayedTags = caseItem.tags.slice(0, 3);
                    const extraTags = caseItem.tags.length > 3 ? `<span class="tag">+${caseItem.tags.length - 3}</span>` : '';
                    
                    caseCard.innerHTML = `
                        <div class="card-actions">
                            <div class="card-action favorite">
                                <i class="${caseItem.isFavorite ? 'fas' : 'far'} fa-heart"></i>
                            </div>
                            <div class="card-action preview" data-id="${caseItem.id}">
                                <i class="fas fa-eye"></i>
                            </div>
                        </div>
                        <div class="case-header">
                            <h3>${caseItem.title}</h3>
                            <div class="case-meta">
                                <span><i class="fas fa-user"></i> ${caseItem.author}</span>
                                <span><i class="fas fa-calendar"></i> ${caseItem.date}</span>
                            </div>
                        </div>
                        <div class="case-body">
                            <p>${caseItem.content}</p>
                            <div class="case-footer">
                                <div class="tags">
                                    ${displayedTags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                    ${extraTags}
                                </div>
                                <button class="btn btn-primary view-detail" data-id="${caseItem.id}">详情</button>
                            </div>
                        </div>
                    `;
                    casesGrid.appendChild(caseCard);
                });
                
                // 更新分页控件
                updatePagination();
                
                // 重新绑定详情按钮事件
                document.querySelectorAll('.view-detail').forEach(button => {
                    button.addEventListener('click', function() {
                        const caseId = parseInt(this.getAttribute('data-id'));
                        openCaseModal(caseId);
                    });
                });
                
                // 绑定预览按钮事件
                document.querySelectorAll('.preview').forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const caseId = parseInt(this.getAttribute('data-id'));
                        openCaseModal(caseId);
                    });
                });
            }, 500);
        }
        
        // 更新分页控件
        function updatePagination() {
            pagination.innerHTML = '';
            
            // 添加上一页按钮
            const prevLi = document.createElement('li');
            prevLi.innerHTML = `<a href="#" class="${currentPage === 1 ? 'disabled' : ''}" data-page="prev"><i class="fas fa-chevron-left"></i></a>`;
            pagination.appendChild(prevLi);
            
            // 添加首页按钮
            if (currentPage > 3) {
                const firstLi = document.createElement('li');
                firstLi.innerHTML = `<a href="#" data-page="1">1</a>`;
                pagination.appendChild(firstLi);
                
                if (currentPage > 4) {
                    const ellipsisLi = document.createElement('li');
                    ellipsisLi.innerHTML = `<a href="#" class="disabled">...</a>`;
                    pagination.appendChild(ellipsisLi);
                }
            }
            
            // 添加页码按钮
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, startPage + 4);
            
            for (let i = startPage; i <= endPage; i++) {
                const pageLi = document.createElement('li');
                pageLi.innerHTML = `<a href="#" class="${i === currentPage ? 'active' : ''}" data-page="${i}">${i}</a>`;
                pagination.appendChild(pageLi);
            }
            
            // 添加尾页按钮
            if (currentPage < totalPages - 2) {
                if (currentPage < totalPages - 3) {
                    const ellipsisLi = document.createElement('li');
                    ellipsisLi.innerHTML = `<a href="#" class="disabled">...</a>`;
                    pagination.appendChild(ellipsisLi);
                }
                
                const lastLi = document.createElement('li');
                lastLi.innerHTML = `<a href="#" data-page="${totalPages}">${totalPages}</a>`;
                pagination.appendChild(lastLi);
            }
            
            // 添加下一页按钮
            const nextLi = document.createElement('li');
            nextLi.innerHTML = `<a href="#" class="${currentPage === totalPages ? 'disabled' : ''}" data-page="next"><i class="fas fa-chevron-right"></i></a>`;
            pagination.appendChild(nextLi);
        }
        
        // 处理分页点击事件
        function handlePaginationClick(e) {
            e.preventDefault();
            
            if (e.target.tagName === 'A') {
                const pageAction = e.target.getAttribute('data-page');
                
                if (pageAction === 'prev' && currentPage > 1) {
                    currentPage--;
                } else if (pageAction === 'next' && currentPage < totalPages) {
                    currentPage++;
                } else if (!isNaN(pageAction)) {
                    currentPage = parseInt(pageAction);
                }
                
                renderCases();
                window.scrollTo({ top: casesGrid.offsetTop - 100, behavior: 'smooth' });
            }
        }
        
        // 应用筛选条件
        function applyFilters() {
            const category = document.getElementById('category').value;
            const region = document.getElementById('region').value;
            const keyword = keywordInput.value.toLowerCase();
            const dateFilter = document.getElementById('date').value;
            
            // 添加到搜索历史
            if (keyword.trim() !== '') {
                searchHistory.unshift(keyword);
                if (searchHistory.length > 10) {
                    searchHistory.pop();
                }
                saveSearchHistory();
                updateSearchHistoryDisplay();
            }
            
            // 记录筛选条件
            const filters = [];
            
            // 筛选案例
            filteredCases = caseData.filter(caseItem => {
                let match = true;
                
                // 分类筛选
                if (category && caseItem.category !== category) {
                    match = false;
                }
                
                // 标签筛选
                if (selectedTags.length > 0) {
                    const hasMatchingTag = selectedTags.some(tag => 
                        caseItem.tags.some(caseTag => caseTag.includes(tag))
                    );
                    if (!hasMatchingTag) {
                        match = false;
                    }
                }
                
                // 地区筛选
                if (region && caseItem.region !== region) {
                    match = false;
                }
                
                // 关键词筛选
                if (keyword && 
                    !caseItem.title.toLowerCase().includes(keyword) && 
                    !caseItem.author.toLowerCase().includes(keyword) && 
                    !caseItem.content.toLowerCase().includes(keyword)) {
                    match = false;
                }
                
                // 时间筛选（简化实现）
                if (dateFilter) {
                    const caseDate = new Date(caseItem.date);
                    const now = new Date();
                    let minDate;
                    
                    switch(dateFilter) {
                        case 'week':
                            minDate = new Date(now.setDate(now.getDate() - 7));
                            break;
                        case 'month':
                            minDate = new Date(now.setMonth(now.getMonth() - 1));
                            break;
                        case 'quarter':
                            minDate = new Date(now.setMonth(now.getMonth() - 3));
                            break;
                        case 'year':
                            minDate = new Date(now.setFullYear(now.getFullYear() - 1));
                            break;
                    }
                    
                    if (caseDate < minDate) {
                        match = false;
                    }
                }
                
                return match;
            });
            
            // 记录筛选条件文本
            if (category) filters.push(`分类: ${document.getElementById('category').options[document.getElementById('category').selectedIndex].text}`);
            if (selectedTags.length > 0) filters.push(`标签: ${selectedTags.join(', ')}`);
            if (region) filters.push(`地区: ${document.getElementById('region').options[document.getElementById('region').selectedIndex].text}`);
            if (keyword) filters.push(`关键词: "${keyword}"`);
            if (dateFilter) filters.push(`时间: ${document.getElementById('date').options[document.getElementById('date').selectedIndex].text}`);
            
            // 更新筛选状态
            if (filters.length > 0) {
                filterStatus.style.display = 'flex';
                activeFilters.textContent = filters.join('，');
            } else {
                filterStatus.style.display = 'none';
            }
            
            // 重置到第一页
            currentPage = 1;
            
            // 渲染筛选后的案例
            renderCases();
        }
        
        // 重置筛选条件
        function resetFilters() {
            document.getElementById('category').value = '';
            document.getElementById('region').value = '';
            document.getElementById('date').value = '';
            keywordInput.value = '';
            
            // 重置标签选择
            selectedTags = [];
            document.querySelectorAll('.tag-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector('.tag-option[data-tag="all"]').className = 'tag-option selected';
            
            filterStatus.style.display = 'none';
            filteredCases = [...caseData];
            currentPage = 1;
            renderCases();
        }
        
        // 初始化回到顶部按钮
        function initBackToTop() {
            const backToTopBtn = document.getElementById('backToTop');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('show');
                } else {
                    backToTopBtn.classList.remove('show');
                }
            });
            
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }
        
        // 初始化案例弹窗
        function initCaseModal() {
            const caseModal = document.getElementById('caseModal');
            const modalClose = document.querySelector('.modal-close');
            
            // 关闭弹窗
            modalClose.addEventListener('click', () => {
                caseModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // 点击背景关闭弹窗
            caseModal.addEventListener('click', (e) => {
                if (e.target === caseModal) {
                    caseModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }
        
        // 打开案例详情弹窗
        function openCaseModal(caseId) {
            const caseItem = caseData.find(item => item.id === caseId);
            if (!caseItem) return;
            
            // 更新弹窗内容
            document.getElementById('modalTitle').textContent = caseItem.title.replace(/<br>/g, ' ');
            document.getElementById('modalAuthor').textContent = caseItem.author;
            document.getElementById('modalDate').textContent = caseItem.date;
            document.getElementById('modalViews').textContent = caseItem.views.toLocaleString();
            
            // 更新标签
            const modalTags = document.getElementById('modalTags');
            modalTags.innerHTML = caseItem.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
            
            // 更新详情内容
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <h3>案例背景</h3>
                <p>${caseItem.details.background}</p>
                
                <h3>实施过程</h3>
                <p>${caseItem.details.process}</p>
                
                <h3>创新亮点</h3>
                <p>${caseItem.details.innovation}</p>
                
                <h3>实施成效</h3>
                <p>${caseItem.details.effect}</p>
            `;
            
            // 显示弹窗
            const caseModal = document.getElementById('caseModal');
            caseModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // 增加浏览次数
            caseItem.views++;
        }
    </script>
</body>
</html>